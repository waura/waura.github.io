<!DOCTYPE html>
<html lang="ja">

<head>
  <!-- ## for client-side less
  <link rel="stylesheet/less" type="text/css" href="/theme/css/style.less">
  <script src="//cdnjs.cloudflare.com/ajax/libs/less.js/1.7.3/less.min.js" type="text/javascript"></script>
  -->
  <link rel="icon" type="image/vnd.microsoft.icon" href="/">
  <link rel="stylesheet" type="text/css" href="/theme/css/normalize.css">
  <link rel="stylesheet" type="text/css" href="/theme/css/style.min.css">
  <link rel="stylesheet" type="text/css" href="/theme/css/pygments.css">
  <link rel="stylesheet" type="text/css" href="//fonts.googleapis.com/css?family=Roboto+Mono">
  <link rel="stylesheet" type="text/css" href="/theme/css/font-awesome.min.css">
  <link rel="stylesheet" type="text/css" href="/theme/css/hatena-bookmark-icon.css">


  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="author" content="waura">
  <meta name="description" content="Posts and writings by waura">

  <link href="/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="waura's blog Atom" />


  <title>
    waura's blog
  </title>

</head>

<body>
  <main>
    <header>
      <div class="site-name">
        <a href="">waura's blog</a>
      </div>
      <p>
          <a href="/archives.html"><i class="fa fa-archive"></i> Archive</a>
          <a href="/categories.html"><i class="fa fa-category"></i> CateGory</a>
      
      </p>
    </header>
    
<article>
  <div class="article__title">
    <h1><a href="/201003071267910248.html">WH_KEYBOARDのフックプロシージャサンプル</a></h1>
  </div>
  <div class="article__meta">
    <p class="article__meta__post-date">Posted on: 日 07 3月 2010</p>
    </p>
  </div>
  <div class="article__text">
    <p>キーボードが押されてない状態から押された状態へ遷移した時と、押している状態から、押されていない状態へ遷移した時に、押されたキーの仮想コード、shift、ctrl、altのそれぞれの状態を表示するフックプロシージャのコード</p>
<p>WH_KEYBORDのフックプロシージャは、0を返すと他のフックプシージャやウィンドウメッセージを処理するウィンドウへメッセージを渡し、0以外を返すとメッセージを渡さない。</p>
<div class="highlight"><pre><span></span><span class="n">LRESULT</span> <span class="nf">KeyboardHookProc</span><span class="p">(</span><span class="kt">int</span> <span class="n">nCode</span><span class="p">,</span> <span class="n">WPARAM</span> <span class="n">wParam</span><span class="p">,</span> <span class="n">LPARAM</span> <span class="n">lParam</span><span class="p">)</span>
<span class="p">{</span>
<span class="k">if</span><span class="p">(</span><span class="n">nCode</span> <span class="o">&lt;</span> <span class="mi">0</span> <span class="o">||</span> <span class="n">nCode</span> <span class="o">==</span> <span class="n">HC_NOREMOVE</span><span class="p">)</span>
<span class="k">return</span> <span class="o">::</span><span class="n">CallNextHookEx</span><span class="p">(</span><span class="n">m_hHook</span><span class="p">,</span> <span class="n">nCode</span><span class="p">,</span> <span class="n">wParam</span><span class="p">,</span> <span class="n">lParam</span><span class="p">);</span>
<span class="o">::</span><span class="n">OutputDebugString</span><span class="p">(</span><span class="s">&quot;keyboard hook! &quot;</span><span class="p">);</span>
<span class="k">if</span><span class="p">((</span><span class="n">lParam</span> <span class="o">&amp;</span> <span class="mh">0xc0000000</span><span class="p">)</span> <span class="o">==</span> <span class="mh">0xc0000000</span><span class="p">){</span>
<span class="n">UINT</span> <span class="n">optChar</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
<span class="c1">//check keyup shift</span>
<span class="k">if</span><span class="p">(</span><span class="o">::</span><span class="n">GetKeyState</span><span class="p">(</span><span class="n">VK_SHIFT</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">){</span>
<span class="o">::</span><span class="n">OutputDebugString</span><span class="p">(</span><span class="s">&quot;shift &quot;</span><span class="p">);</span>
<span class="p">}</span>
<span class="c1">//check keyup …</span></pre></div>
  </div>
</article>
<hr />
<article>
  <div class="article__title">
    <h1><a href="/201003011267393466.html">開発版更新</a></h1>
  </div>
  <div class="article__meta">
    <p class="article__meta__post-date">Posted on: 月 01 3月 2010</p>
    </p>
  </div>
  <div class="article__text">
    <ul>
<li>ナビゲーターの画像が何もしてない時でもチカチカしてたのを修正</li>
<li>半透明なピクセルに半透明なピクセルを書き込めないバグを修正</li>
<li>ソフト円ブラシを追加</li>
<li>レイヤー合成高速化</li>
</ul>
<p><a href="http://key0note.ath.cx/hp/frayer_wiki/">http://key0note.ath.cx/hp/frayer_wiki/</a></p>
<p>[<a href="http://f.hatena.ne.jp/hiroki0/20100301063557"><img alt="f:id:hiroki0:20100301063557j:image" class="hatena-fotolife" src="http://cdn-ak.f.st-hatena.com/images/fotolife/h/hiroki0/20100301/20100301063557.jpg" title="f:id:hiroki0:20100301063557j:image"></a>
ブラシのテスト。<br>
黒い線がハード円ブラシ、赤い線がハードエアーブラシ、青い線がソフト円ブラシ、緑の線がソフトエアーブラシ。</p>
  </div>
</article>
<hr />
<article>
  <div class="article__title">
    <h1><a href="/201002231266941596.html">OpenCL開発環境のインストール</a></h1>
  </div>
  <div class="article__meta">
    <p class="article__meta__post-date">Posted on: 火 23 2月 2010</p>
    </p>
  </div>
  <div class="article__text">
    <p><a href="http://d.hatena.ne.jp/keyword/windows7">windows7</a>
64bit、<a href="http://d.hatena.ne.jp/keyword/Visual%20Studio">Visual
Studio</a>
2008環境下に<a href="http://d.hatena.ne.jp/keyword/OpenCL">OpenCL</a>の開発環境をインストールする手順を記します。<br>
自分は<a href="http://d.hatena.ne.jp/keyword/NVIDIA">NVIDIA</a>の<a href="http://d.hatena.ne.jp/keyword/GPU">GPU</a>を使っているので<a href="http://d.hatena.ne.jp/keyword/NVIDIA">NVIDIA</a>の<a href="http://d.hatena.ne.jp/keyword/OpenCL">OpenCL</a>環境をインストールします。</p>
<h4>ドライバ、<a href="http://d.hatena.ne.jp/keyword/SDK">SDK</a>のインストール</h4>
<p><a href="http://developer.nvidia.com/object/opencl.html">http://developer.nvidia.com/object/opencl.html</a><br>
上のNVIDIのサイトから</p>
<ul>
<li><a href="http://d.hatena.ne.jp/keyword/NVIDIA">NVIDIA</a> Driver for
    WinVista and <a href="http://d.hatena.ne.jp/keyword/Win7">Win7</a></li>
<li><a href="http://d.hatena.ne.jp/keyword/GPU%20Computing">GPU
    Computing</a>
    <a href="http://d.hatena.ne.jp/keyword/SDK">SDK</a> code samples and
    more</li>
</ul>
<p>をダウンロードしてインストールします。<br>
再起動が求められた場合は、再起動を行います。</p>
<p><a href="http://d.hatena.ne.jp/keyword/windows7">windows7</a>の場合では、インクルードファイルとライブラリファイルはそれぞれ次の箇所にインストールされてました。</p>
<div class="highlight"><pre><span></span>C:\Users\(ユーザ)\AppData …</pre></div>
  </div>
</article>
<hr />
<article>
  <div class="article__title">
    <h1><a href="/201002141266161163.html">円描画のアンチエイリアス</a></h1>
  </div>
  <div class="article__meta">
    <p class="article__meta__post-date">Posted on: 日 14 2月 2010</p>
    </p>
  </div>
  <div class="article__text">
    <p>円描画時の<a href="http://d.hatena.ne.jp/keyword/%A5%A2%A5%F3%A5%C1%A5%A8%A5%A4%A5%EA%A5%A2%A5%B9">アンチエイリアス</a>のかけ方のテスト<br>
[<a class="hatena-fotolife" href="http://f.hatena.ne.jp/hiroki0/20100215002421"><img alt="f:id:hiroki0:20100215002421p:image" class="hatena-fotolife" src="http://cdn-ak.f.st-hatena.com/images/fotolife/h/hiroki0/20100215/20100215002421.png" title="f:id:hiroki0:20100215002421p:image"></a>]{itemscope=""
itemtype="http://schema.org/Photograph"}</p>
<p>ついでにブラシ描画のテスト<br>
[<a class="hatena-fotolife" href="http://f.hatena.ne.jp/hiroki0/20100215002422"><img alt="f:id:hiroki0:20100215002422p:image" class="hatena-fotolife" src="http://cdn-ak.f.st-hatena.com/images/fotolife/h/hiroki0/20100215/20100215002422.png" title="f:id:hiroki0:20100215002422p:image"></a>]{itemscope=""
itemtype="http://schema.org/Photograph"}</p>
  </div>
</article>
<hr />
<article>
  <div class="article__title">
    <h1><a href="/201002111265869988.html">ローカルフック使用時にはスレッドIDが必要</a></h1>
  </div>
  <div class="article__meta">
    <p class="article__meta__post-date">Posted on: 木 11 2月 2010</p>
    </p>
  </div>
  <div class="article__text">
    <p>ローカルフックを作成するには、<br>
第3引数にNULL、第4引数にスレッドIDを指定する。</p>
<p>対して、グローバルフックの場合は、<br>
第3引数にDLLモジュールのハンドル、第4引数に0を指定する。</p>
<div class="highlight"><pre><span></span><span class="c1">//ローカルフックの作成</span>
<span class="o">::</span><span class="n">SetWindowsHookEx</span><span class="p">(</span>
  <span class="n">WH_GETMESSAGE</span><span class="p">,</span>
  <span class="p">(</span><span class="n">HOOKPROC</span><span class="p">)</span><span class="n">hookfunc</span><span class="p">,</span>
  <span class="nb">NULL</span><span class="p">,</span>
  <span class="o">::</span><span class="n">GetCurrentThreadId</span><span class="p">());</span>
</pre></div>
  </div>
</article>
<hr />
<article>
  <div class="article__title">
    <h1><a href="/200911151258237873.html">安全なSTL listの要素削除ループ</a></h1>
  </div>
  <div class="article__meta">
    <p class="article__meta__post-date">Posted on: 日 15 11月 2009</p>
    </p>
  </div>
  <div class="article__text">
    <p>erase(itr)を呼び出すとitrは使えなくなるので、<br>
erase()の返り値で次の要素の<a href="http://d.hatena.ne.jp/keyword/%A5%A4%A5%C6%A5%EC%A1%BC%A5%BF">イテレータ</a>を受け取りループを続行する。</p>
<div class="highlight"><pre><span></span><span class="n">list</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;::</span><span class="n">iterator</span> <span class="n">itr</span> <span class="o">=</span> <span class="n">SampleList</span><span class="p">.</span><span class="n">begin</span><span class="p">();</span>
<span class="k">for</span> <span class="p">(;</span> <span class="n">itr</span> <span class="o">!=</span> <span class="n">SampleList</span><span class="p">.</span><span class="n">end</span><span class="p">();</span> <span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span><span class="p">(</span> <span class="err">条件</span> <span class="p">)</span> <span class="p">{</span>
    <span class="n">itr</span> <span class="o">=</span> <span class="n">SampleList</span><span class="p">.</span><span class="n">erase</span><span class="p">(</span> <span class="n">itr</span> <span class="p">);</span>
    <span class="k">continue</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="n">it</span><span class="o">++</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
  </div>
</article>
<hr />
<article>
  <div class="article__title">
    <h1><a href="/200911141258218733.html">プロセッサ数を求めるコード</a></h1>
  </div>
  <div class="article__meta">
    <p class="article__meta__post-date">Posted on: 土 14 11月 2009</p>
    </p>
  </div>
  <div class="article__text">
    <p>GetSystemInfoでシステムの情報をSYSTEM_INFO構造体に取得すると、dwNumberOfProcessorsにプロセッサ数が入る。</p>
<div class="highlight"><pre><span></span>SYSTEM_INFO si;
GetSystemInfo(&amp;si);
si.dwNumberOfProcessors; //プロセッサ数
</pre></div>


<h2>参考URL</h2>
<p><a href="http://msdn.microsoft.com/ja-jp/library/cc429808.aspx">http://msdn.microsoft.com/ja-jp/library/cc429808.aspx</a></p>
  </div>
</article>
<hr />
<article>
  <div class="article__title">
    <h1><a href="/200909271254003613.html">トーンカーブ</a></h1>
  </div>
  <div class="article__meta">
    <p class="article__meta__post-date">Posted on: 日 27 9月 2009</p>
    </p>
  </div>
  <div class="article__text">
    <p>3次スプラインを利用して<a href="http://d.hatena.ne.jp/keyword/%A5%C8%A1%BC%A5%F3%A5%AB%A1%BC%A5%D6">トーンカーブ</a>を実装してみた。<br>
[<a href="http://f.hatena.ne.jp/hiroki0/20090927071914"><img alt="f:id:hiroki0:20090927071914j:image" class="hatena-fotolife" src="http://cdn-ak.f.st-hatena.com/images/fotolife/h/hiroki0/20090927/20090927071914.jpg" title="f:id:hiroki0:20090927071914j:image"></a></p>
  </div>
</article>
<hr />
<article>
  <div class="article__title">
    <h1><a href="/200909231253715978.html">画面の大きさを取得するWinAPI メモ</a></h1>
  </div>
  <div class="article__meta">
    <p class="article__meta__post-date">Posted on: 水 23 9月 2009</p>
    </p>
  </div>
  <div class="article__text">
    <h2>メイン画面の大きさを取得</h2>
<div class="highlight"><pre><span></span><span class="kt">int</span> <span class="n">width</span> <span class="o">=</span> <span class="o">::</span><span class="n">GetSystemMetrics</span><span class="p">(</span><span class="n">SM_CXSCREEN</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">height</span> <span class="o">=</span> <span class="o">::</span><span class="n">GetSystemMetrics</span><span class="p">(</span><span class="n">SM_CYSCREEN</span><span class="p">);</span>
</pre></div>


<h2>マルチディスプレイ環境で全ての画面領域の大きさを取得</h2>
<div class="highlight"><pre><span></span><span class="kt">int</span> <span class="n">width</span> <span class="o">=</span> <span class="o">::</span><span class="n">GetSystemMetrics</span><span class="p">(</span><span class="n">SM_CXVIRTUALSCREEN</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">height</span> <span class="o">=</span> <span class="o">::</span><span class="n">GetSystemMetrics</span><span class="p">(</span><span class="n">SM_CYVIRTUALSCREEN</span><span class="p">);</span>
</pre></div>


<h2>参考URL</h2>
<p><a href="http://msdn.microsoft.com/ja-jp/library/cc429812.aspx">http://msdn.microsoft.com/ja-jp/library/cc429812.aspx</a></p>
  </div>
</article>
<hr />
<article>
  <div class="article__title">
    <h1><a href="/200909211253548524.html">OpenCVで3次スプライン補間</a></h1>
  </div>
  <div class="article__meta">
    <p class="article__meta__post-date">Posted on: 月 21 9月 2009</p>
    </p>
  </div>
  <div class="article__text">
    <p><a href="http://d.hatena.ne.jp/keyword/OpenCV">OpenCV</a>の連立1次方程式を解くcvSolveを利用して3次のスプライン補間を行うコード。</p>
<h2>コード</h2>
<div class="highlight"><pre><span></span><span class="cp">#include</span> <span class="cpf">&lt;stdio.h&gt;</span><span class="cp"></span>
<span class="cp">#include</span> <span class="cpf">&lt;string.h&gt;</span><span class="cp"></span>
<span class="cp">#include</span> <span class="cpf">&lt;cv.h&gt;</span><span class="cp"></span>
<span class="cp">#include</span> <span class="cpf">&lt;highgui.h&gt;</span><span class="cp"></span>
<span class="kt">void</span> <span class="nf">SetPixelToBGR</span><span class="p">(</span><span class="n">IplImage</span> <span class="o">*</span><span class="n">image</span><span class="p">,</span> <span class="kt">int</span> <span class="n">x</span><span class="p">,</span> <span class="kt">int</span> <span class="n">y</span><span class="p">,</span> <span class="kt">int</span> <span class="n">b</span><span class="p">,</span> <span class="kt">int</span> <span class="n">g</span><span class="p">,</span> <span class="kt">int</span> <span class="n">r</span><span class="p">)</span>
<span class="p">{</span>
  <span class="n">assert</span><span class="p">(</span><span class="n">image</span><span class="o">-&gt;</span><span class="n">nChannels</span> <span class="o">==</span> <span class="mi">3</span><span class="p">);</span>
  <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="n">image</span><span class="p">)</span> <span class="k">return</span><span class="p">;</span>
  <span class="k">if</span><span class="p">((</span> <span class="mi">0</span> <span class="o">&lt;=</span> <span class="n">x</span> <span class="o">&amp;&amp;</span> <span class="n">x</span> <span class="o">&lt;=</span> <span class="n">image</span><span class="o">-&gt;</span><span class="n">width</span> <span class="o">-</span><span class="mi">1</span> <span class="p">)</span><span class="o">&amp;&amp;</span> <span class="p">(</span><span class="mi">0</span> <span class="o">&lt;=</span> <span class="n">y</span> <span class="o">&amp;&amp;</span> <span class="n">y</span> <span class="o">&lt;=</span> <span class="n">image</span><span class="o">-&gt;</span><span class="n">height</span> <span class="o">-</span><span class="mi">1</span> <span class="p">)</span> <span class="p">)</span>
  <span class="p">{</span>
    <span class="n">b …</span></pre></div>
  </div>
</article>
    
<div class="pagination">
    <ul>
        <li class="pagination__prev">
            <a href="/index2.html">&laquo;</a>
        </li>



          <li>
            <a  href="/index.html">1</a>
          </li>


          <li>
            <a  href="/index2.html">2</a>
          </li>


          <li>
            <a class="pagination__page--current" href="/index3.html">3</a>
          </li>


          <li>
            <a  href="/index4.html">4</a>
          </li>


          <li>
            <a  href="/index5.html">5</a>
          </li>


          <li>
            <a  href="/index6.html">6</a>
          </li>


                <li>.....</li>
            </li>


                <li>.....</li>
            </li>


          <li>
            <a  href="/index9.html">9</a>
          </li>

        <li class="pagination__next">
            <a href="/index4.html">&raquo;</a>
        </li>
    </ul>
</div>
          
  </main>
    <footer>
      <!--
      <div class="author__logo">
          <img src="/theme/images/logo.png" alt="logo">
      </div>
      -->
      <section class="author">
        <div class="author__name">
          <a href="/pages/about.html">waura</a>
          <p></p>
        </div>
        <div class="author__link">
          <ul>
            <li>
              <a href="https://github.com/waura" target="_blank" title="github">
                <i class="fa fa-github-square"></i>
              </a>
            </li>
            <li>
              <a href="https://qiita.com/waura" target="_blank" title="qiita">
              </a>
            </li>
            <li>
              <a href="/feeds/all.atom.xml" target="_blank" title="Feed">
                <i class="fa fa-rss"></i>
              </a>
            </li>
          </ul>
        </div>
      </section>          
      <div class="ending-message">
        <p>&copy; waura. Powered by <a href="http://getpelican.com" target="_blank">Pelican</a>, Theme is using <a href="https://github.com/laughk/pelican-hss" target="_blank">HSS</a>. </p>
      </div>
    </footer>
</body>
</html>